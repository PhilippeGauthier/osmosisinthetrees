{{#
    @name Default
    @desc The default template with an outer wrapper grid as defined in tailwind.config.js. It makes sure all blocks on a page get evenly spaced without having to worry about margins or paddings.
#}}
<div class="relative flex flex-col min-h-screen {{ if segment_1 }}z-[2]{{ /if }}" >
    {{# <img src="/visuals/oitt_hero_bg.jpg" alt=""> #}}
    

    {{ if !segment_1 }}
        <div class="relative z-[2]">
            
            <div class="mx-auto relative">
                
                <article class="prose-sm lg:prose mt-10 mb-6 xl:my-12 max-w-xl mx-auto prose-a:text-primary text-center">
                    {{ early_bird_paragraph }}
                </article>
                <div class="py-12 sm:pb-12 sm:pt-12 md:py-12 px-8 sm:px-6 lg:px-8 lg:max-w-[80vw] mx-auto">
                    <div id="schedule-grid" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-12">
                        <a href="/visuals/OITT-2025_schedule_color_version_THURSDAY_9x16.PNG" target="_blank" class="block" data-day="thursday" data-date="2025-09-25">
                            <img src="/visuals/OITT-2025_schedule_color_version_THURSDAY_9x16.PNG" class="w-full h-auto" alt="Thursday Schedule">
                        </a>
                        <a href="/visuals/OITT-2025_schedule_color_version_FRIDAY_9x16.PNG" target="_blank" class="block" data-day="friday" data-date="2025-09-26">
                            <img src="/visuals/OITT-2025_schedule_color_version_FRIDAY_9x16.PNG" class="w-full h-auto" alt="Friday Schedule">
                        </a>
                        <a href="/visuals/OITT-2025_schedule_color_version_SATURDAY_9x16.PNG" target="_blank" class="block" data-day="saturday" data-date="2025-09-27">
                            <img src="/visuals/OITT-2025_schedule_color_version_SATURDAY_9x16.PNG" class="w-full h-auto" alt="Saturday Schedule">
                        </a>
                    </div>
                    <img src="visuals/OITT25_FULL LINEUP_small2x@2x.png" class="lg:w-2/3 mx-auto" alt="">
            </div>
            <script>
                (function() {
                    function reorderScheduleImages() {
                        const grid = document.getElementById('schedule-grid');
                        if (!grid) return;

                        const now = new Date();
                        console.log('Current time:', now.toString());

                        const scheduleLinks = Array.from(grid.querySelectorAll('a[data-date]'));

                        // Calculate when each day moves to the back
                        scheduleLinks.forEach(link => {
                            const eventDate = new Date(link.dataset.date + 'T00:00:00');
                            const cutoffTime = new Date(eventDate.getTime() + (31 * 60 * 60 * 1000));
                            const timeUntilMove = cutoffTime - now;
                            const hoursUntilMove = Math.floor(timeUntilMove / (1000 * 60 * 60));
                            const minutesUntilMove = Math.floor((timeUntilMove % (1000 * 60 * 60)) / (1000 * 60));

                            if (timeUntilMove > 0) {
                                console.log(`${link.dataset.day.toUpperCase()} will move to back at: ${cutoffTime.toString()}`);
                                console.log(`  Time until move: ${hoursUntilMove}h ${minutesUntilMove}m`);
                            } else {
                                console.log(`${link.dataset.day.toUpperCase()} already moved to back (cutoff was ${cutoffTime.toString()})`);
                            }
                        });

                        console.log('---');

                        scheduleLinks.sort((a, b) => {
                            const dateA = new Date(a.dataset.date + 'T00:00:00');
                            const dateB = new Date(b.dataset.date + 'T00:00:00');

                            // Add 31 hours to get to 7am the next day (24 hours + 7 hours)
                            const cutoffA = new Date(dateA.getTime() + (31 * 60 * 60 * 1000));
                            const cutoffB = new Date(dateB.getTime() + (31 * 60 * 60 * 1000));

                            const isPastA = now >= cutoffA;
                            const isPastB = now >= cutoffB;

                            if (isPastA && !isPastB) return 1;
                            if (!isPastA && isPastB) return -1;

                            return dateA - dateB;
                        });

                        // Clear and re-append to force DOM update
                        grid.innerHTML = '';
                        console.log('New order after sorting:');
                        scheduleLinks.forEach((link, index) => {
                            console.log(`  ${index + 1}. ${link.dataset.day.toUpperCase()}`);
                            grid.appendChild(link);
                        });
                    }

                    // Run immediately
                    if (document.readyState === 'loading') {
                        document.addEventListener('DOMContentLoaded', reorderScheduleImages);
                    } else {
                        reorderScheduleImages();
                    }

                    // Check every minute
                    setInterval(reorderScheduleImages, 60000);
                })();
            </script>
            </div>
            {{ partial:page_builder/block }}
            {{# <div class="flex flex-col items-center justify-center gap-y-0 leading-none text-osmosis-gray mb-8">
                {{ first_wave_artists }}
                    <span class="font-tf1 text-[70px] lg:text-[90px]" style="line-height: 0.7">{{ value }}</span>
                {{ /first_wave_artists }}
            </div> #}}

            <article class="prose-sm lg:prose mb-12  max-w-xl mx-auto prose-a:text-primary text-center">{{ header_paragraph }}</article>
            {{# <div
                 class="max-w-xl mx-auto gap-x-10 flex-wrap flex justify-center mb-12 z-20" id="artists">
                
        
                
                {{ collection:artists sort="title" }}
                    {{ partial:components/artist_grid }}
                {{ /collection:artists }}
        
            </div> #}}
            {{ /partial:page_builder/block }}
        </div>
        <main class="flex-grow py-12 md:py-16 lg:py-12 2xl:py-20 stack-12 md:stack-16 lg:stack-20 {{ if segment_1 }}z-[2]{{ /if }}" id="content">
 
            {{ page_builder scope="block" }}
                {{ partial src="page_builder/{type}" }} 
            {{ /page_builder }}
        </main>
    </div>
    {{ /if }}

    
    <!-- End: /default.antlers.html -->
    